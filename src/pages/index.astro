---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogCard from '../components/blog/BlogCard.astro';
import ProductCard from '../components/product/ProductCard.astro';
import { getCollection } from 'astro:content';
import siteConfig from '../data/site-config.json';
import categories from '../data/categories.json';

const allPosts = await getCollection('blog', ({ data }) => !data.draft);
const recentPosts = allPosts
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 3);

const allProducts = await getCollection('products');
const featuredProducts = allProducts.filter((p) => p.data.featured).slice(0, 4);
const bestsellerProducts = allProducts.filter((p) => p.data.bestseller).slice(0, 3);

const trendingProducts = [
  { name: "Lampe Sunset Projection", emoji: "ğŸŒ…", price: "19,99", tag: "ğŸ”¥ Viral TikTok", sales: "50K+", slug: "lampe-sunset-projection" },
  { name: "Miroir Soleil DorÃ© 60cm", emoji: "ğŸª", price: "49,99", tag: "â­ Best-seller", sales: "35K+", slug: "miroir-soleil-dore" },
  { name: "Bocaux Bambou Set de 6", emoji: "âœ¨", price: "36,99", tag: "ğŸ´ Top cuisine", sales: "22K+", slug: "bocaux-conservation-verre" },
  { name: "Cache-Pot CÃ©ramique x3", emoji: "ğŸŒ¿", price: "28,99", tag: "ğŸŒ± Tendance", sales: "14K+", slug: "cache-pot-ceramique-blanc" },
  { name: "Tapis BerbÃ¨re GÃ©o Noir/Blanc", emoji: "ğŸ§¶", price: "44,99", tag: "ğŸ† Incontournable", sales: "18K+", slug: "tapis-berbere-blanc" },
  { name: "Set SDB Noir Mat 6 piÃ¨ces", emoji: "ğŸš¿", price: "65,99", tag: "ğŸ’ Luxe abordable", sales: "8K+", slug: "accessoires-bain-noir-mat" },
];

const ugcVideos = [
  { title: "Transformation salon 200â‚¬", views: "1,2M vues", thumbnail: "ğŸ›‹ï¸", duration: "0:58" },
  { title: "Haul dÃ©co Amazon Octobre", views: "847K vues", thumbnail: "ğŸ“¦", duration: "2:14" },
  { title: "Before/After chambre LED", views: "634K vues", thumbnail: "ğŸ’¡", duration: "1:33" },
  { title: "Top 5 lampes moins de 30â‚¬", views: "412K vues", thumbnail: "ğŸŒ…", duration: "1:47" },
];

const faqItems = [
  {
    q: "Comment choisissez-vous les produits ?",
    a: "Je commande et teste personnellement chaque produit avant de le recommander. Je vÃ©rifie la qualitÃ©, la durabilitÃ© et le rapport qualitÃ©/prix. Seuls les produits avec minimum 4 Ã©toiles et que j'utilise moi-mÃªme sont sÃ©lectionnÃ©s."
  },
  {
    q: "Les produits sont-ils disponibles en France ?",
    a: "Oui, tous les liens renvoient vers Amazon.fr avec livraison Prime 24-48h disponible pour la plupart des articles."
  },
  {
    q: "Les prix affichÃ©s sont-ils exacts ?",
    a: "Les prix sont vÃ©rifiÃ©s rÃ©guliÃ¨rement mais Amazon les actualise souvent. La date de vÃ©rification est indiquÃ©e sur chaque fiche produit."
  },
  {
    q: "Gagnez-vous une commission sur les ventes ?",
    a: "Oui, en tant que Partenaire Amazon je touche une commission si vous achetez via mes liens, sans surcoÃ»t pour vous. C'est ce qui me permet de continuer Ã  tester des produits gratuitement pour vous."
  }
];
---

<BaseLayout
  title="DÃ©coration Maison Pas Cher â€” Produits TestÃ©s & ApprouvÃ©s"
  description="DÃ©couvrez 64 produits dÃ©co Amazon testÃ©s par Issam. Avis honnÃªtes, prix vÃ©rifiÃ©s, livraison Prime. Transformez votre intÃ©rieur sans vous ruiner."
>
  <!-- ===== HERO ===== -->
  <section class="relative overflow-hidden bg-gradient-to-br from-warm-50 via-white to-primary-50 py-16 md:py-24 bg-pattern">
    <div class="container-custom relative z-10">
      <div class="max-w-3xl mx-auto text-center">

        <!-- Social proof pill â€” Bandwagon effect (marketing-psychology) -->
        <div class="inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-sm border border-primary-100 mb-6">
          <span class="flex h-2 w-2 relative">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
          </span>
          <span class="text-sm text-gray-700 font-medium">+10 000 lecteurs nous font confiance</span>
        </div>

        <!-- H1 â€” Outcome-focused (copywriting skill) -->
        <h1 class="font-serif text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight mb-5">
          DÃ©corez votre maison
          <span class="text-gradient"> sans vous ruiner</span>
        </h1>

        <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed">
          Salut, je suis <strong>Issam</strong>. Je teste chaque produit Amazon avant de vous le recommander.
          <br class="hidden md:block" />
          Aucun bullshit, que des vrais avis.
        </p>

        <!-- CTAs â€” Strong action verbs (copywriting skill) -->
        <div class="flex flex-col sm:flex-row gap-3 justify-center mb-10">
          <a href="/produits/" class="btn-primary text-base px-8 py-4">
            ğŸ›ï¸ Voir les 64 produits testÃ©s
          </a>
          <a href="/blog/" class="btn-outline text-base px-8 py-4">
            ğŸ“ Lire les guides gratuits
          </a>
        </div>

        <!-- Trust badges â€” Authority bias (marketing-psychology) -->
        <div class="flex flex-wrap items-center justify-center gap-3">
          <div class="trust-badge">âœ… Produits testÃ©s IRL</div>
          <div class="trust-badge">â­ Min. 4â˜… Amazon</div>
          <div class="trust-badge">ğŸ“¦ Livraison Prime 24h</div>
          <div class="trust-badge">ğŸ’° Moins de 100 â‚¬</div>
        </div>
      </div>
    </div>

    <!-- DÃ©coration flottante -->
    <div class="absolute top-16 left-8 text-7xl opacity-5 animate-float pointer-events-none">ğŸ›‹ï¸</div>
    <div class="absolute bottom-16 right-8 text-7xl opacity-5 animate-float pointer-events-none" style="animation-delay: 3s;">ğŸŒ¿</div>
  </section>

  <!-- ===== SOCIAL PROOF STATS ===== -->
  <section class="py-8 bg-white border-y border-gray-100">
    <div class="container-custom">
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div class="stat-card">
          <div class="text-3xl font-bold text-primary-600 font-serif">64+</div>
          <div class="text-sm text-gray-500 mt-1">Produits testÃ©s</div>
        </div>
        <div class="stat-card">
          <div class="text-3xl font-bold text-primary-600 font-serif">4,5â˜…</div>
          <div class="text-sm text-gray-500 mt-1">Note moyenne</div>
        </div>
        <div class="stat-card">
          <div class="text-3xl font-bold text-primary-600 font-serif">100k+</div>
          <div class="text-sm text-gray-500 mt-1">Avis Amazon</div>
        </div>
        <div class="stat-card">
          <div class="text-3xl font-bold text-primary-600 font-serif">10k+</div>
          <div class="text-sm text-gray-500 mt-1">AbonnÃ©s</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== TRENDING ===== -->
  <section class="py-16 bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950">
    <div class="container-custom">
      <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between mb-10 gap-4">
        <div>
          <span class="inline-flex items-center gap-1.5 bg-red-500/20 text-red-400 px-3 py-1 rounded-full text-xs font-bold mb-3 border border-red-500/20">
            ğŸ”¥ TRENDING NOW
          </span>
          <h2 class="font-serif text-3xl md:text-4xl font-bold text-white">
            Les produits du moment
          </h2>
          <p class="text-gray-400 mt-2 text-sm">SÃ©lection mise Ã  jour â€” vÃ©rifiÃ©s cette semaine sur Amazon.fr</p>
        </div>
        <a href="/produits/" class="text-primary-400 hover:text-primary-300 font-semibold text-sm flex items-center gap-1 whitespace-nowrap transition-colors">
          Tout voir (64 produits)
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        {trendingProducts.map((product) => (
          <a
            href={`/produits/${product.slug}/`}
            class="bg-gray-800/60 border border-gray-700/50 rounded-2xl p-5 hover:border-amber-400/60 transition-all duration-300 hover:scale-[1.01] group block backdrop-blur-sm"
          >
            <div class="flex items-center justify-between mb-4">
              <span class="text-4xl">{product.emoji}</span>
              <span class="text-xs font-bold px-3 py-1.5 rounded-full bg-amber-400/15 text-amber-400 border border-amber-400/25">{product.tag}</span>
            </div>
            <h3 class="font-bold text-white group-hover:text-amber-400 transition-colors mb-1 text-base leading-snug">{product.name}</h3>
            <div class="flex items-center justify-between mt-4 pt-3 border-t border-gray-700/50">
              <span class="text-2xl font-bold text-amber-400">{product.price} â‚¬</span>
              <div class="text-right">
                <span class="block text-xs text-gray-400">{product.sales} vendus</span>
                <span class="block text-xs text-green-400 font-medium mt-0.5">En stock âœ“</span>
              </div>
            </div>
            <div class="mt-4 text-center bg-amber-400 text-gray-900 py-2.5 rounded-xl font-bold text-sm group-hover:bg-amber-300 transition-colors">
              Voir le prix sur Amazon â†’
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- ===== COMMENT Ã‡A MARCHE â€” Reduce complexity (page-cro) ===== -->
  <section class="py-16 bg-white">
    <div class="container-custom">
      <div class="text-center mb-12">
        <h2 class="font-serif text-3xl md:text-4xl font-bold text-gray-900 mb-3">Comment Ã§a marche ?</h2>
        <p class="text-gray-500 max-w-xl mx-auto">De la dÃ©couverte Ã  la livraison, un processus simple et transparent</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
        <div class="text-center p-6">
          <div class="w-14 h-14 bg-primary-50 rounded-2xl flex items-center justify-center mx-auto mb-4 text-2xl">ğŸ”</div>
          <div class="text-xs font-bold text-primary-600 uppercase tracking-wider mb-2">Ã‰tape 1</div>
          <h3 class="font-serif font-bold text-gray-900 mb-2">Je teste pour vous</h3>
          <p class="text-sm text-gray-500 leading-relaxed">Je commande, j'utilise et j'Ã©value chaque produit pendant minimum 2 semaines avant de vous donner mon avis.</p>
        </div>
        <div class="text-center p-6">
          <div class="w-14 h-14 bg-accent-50 rounded-2xl flex items-center justify-center mx-auto mb-4 text-2xl">âœï¸</div>
          <div class="text-xs font-bold text-accent-600 uppercase tracking-wider mb-2">Ã‰tape 2</div>
          <h3 class="font-serif font-bold text-gray-900 mb-2">Avis honnÃªte</h3>
          <p class="text-sm text-gray-500 leading-relaxed">Je liste les vrais avantages et inconvÃ©nients. Si un produit ne vaut pas le coup, je vous le dis clairement.</p>
        </div>
        <div class="text-center p-6">
          <div class="w-14 h-14 bg-amber-50 rounded-2xl flex items-center justify-center mx-auto mb-4 text-2xl">ğŸ›ï¸</div>
          <div class="text-xs font-bold text-amber-600 uppercase tracking-wider mb-2">Ã‰tape 3</div>
          <h3 class="font-serif font-bold text-gray-900 mb-2">Vous achetez en confiance</h3>
          <p class="text-sm text-gray-500 leading-relaxed">Cliquez sur le lien Amazon, commandez et recevez en 24-48h. Satisfait ou remboursÃ© par Amazon.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CATÃ‰GORIES ===== -->
  <section class="py-16 bg-gray-50">
    <div class="container-custom">
      <div class="text-center mb-10">
        <h2 class="font-serif text-3xl font-bold text-gray-900 mb-2">
          Explorez par piÃ¨ce
        </h2>
        <p class="text-gray-500 text-sm">Guides et produits triÃ©s par espace de vie</p>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3">
        {categories.map((cat) => (
          <a
            href={`/produits/?cat=${cat.slug}`}
            class="card p-5 text-center hover:border-primary-200 group transition-all duration-200 hover:-translate-y-1"
          >
            <span class="text-4xl mb-3 block">{cat.emoji}</span>
            <h3 class="font-semibold text-gray-900 group-hover:text-primary-600 transition-colors text-sm">{cat.name}</h3>
            <p class="text-xs text-gray-400 mt-1 hidden sm:block">{cat.description}</p>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- ===== FEATURED PRODUCTS ===== -->
  {featuredProducts.length > 0 && (
    <section class="py-16 bg-white">
      <div class="container-custom">
        <div class="flex items-center justify-between mb-10">
          <div>
            <h2 class="font-serif text-3xl font-bold text-gray-900">
              â­ Mes coups de cÅ“ur
            </h2>
            <p class="text-gray-500 mt-1 text-sm">Produits que j'ai gardÃ©s aprÃ¨s test â€” recommandÃ©s Ã  100%</p>
          </div>
          <a href="/produits/" class="text-primary-600 hover:text-primary-700 font-medium text-sm flex items-center gap-1 whitespace-nowrap">
            Voir tout
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          {featuredProducts.map((product) => (
            <ProductCard
              name={product.data.name}
              slug={product.data.slug}
              shortDescription={product.data.shortDescription}
              image={product.data.image}
              category={product.data.category}
              price={product.data.price}
              rating={product.data.rating}
              featured={product.data.featured}
              bestseller={product.data.bestseller}
              inStock={product.data.inStock}
            />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- ===== UGC / TIKTOK SECTION â€” Social proof (social-content skill) ===== -->
  <section class="py-16 bg-gradient-to-br from-gray-950 to-gray-900">
    <div class="container-custom">
      <div class="flex flex-col md:flex-row md:items-end justify-between mb-10 gap-4">
        <div>
          <span class="inline-flex items-center gap-1.5 text-pink-400 text-xs font-bold px-3 py-1 bg-pink-400/10 rounded-full border border-pink-400/20 mb-3">
            ğŸ“± VU SUR TIKTOK
          </span>
          <h2 class="font-serif text-3xl font-bold text-white">
            Mes vidÃ©os les plus vues
          </h2>
          <p class="text-gray-400 text-sm mt-2">Transformations, hauls Amazon et bons plans dÃ©co en vidÃ©o</p>
        </div>
        <a href={siteConfig.social.tiktok} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-5 py-2.5 bg-white/10 hover:bg-white/20 text-white rounded-xl text-sm font-medium transition-colors border border-white/10 whitespace-nowrap">
          <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-2.88 2.5 2.89 2.89 0 01-2.89-2.89 2.89 2.89 0 012.89-2.89c.28 0 .54.04.79.1V9.01a6.27 6.27 0 00-.79-.05 6.34 6.34 0 00-6.34 6.34 6.34 6.34 0 006.34 6.34 6.34 6.34 0 006.34-6.34V8.75a8.18 8.18 0 004.76 1.52V6.84a4.83 4.83 0 01-1-.15z"/></svg>
          Voir toutes les vidÃ©os
        </a>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {ugcVideos.map((video) => (
          <a
            href={siteConfig.social.tiktok}
            target="_blank"
            rel="noopener noreferrer"
            class="group block"
          >
            <div class="aspect-[9/16] bg-gray-800 rounded-2xl overflow-hidden relative border border-gray-700/50 group-hover:border-pink-400/50 transition-all duration-300">
              <!-- Thumbnail placeholder -->
              <div class="absolute inset-0 flex flex-col items-center justify-center gap-3">
                <span class="text-5xl">{video.thumbnail}</span>
                <span class="text-xs text-gray-400 text-center px-3 leading-snug font-medium">{video.title}</span>
              </div>
              <!-- Play button -->
              <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30">
                <div class="w-14 h-14 bg-white/90 rounded-full flex items-center justify-center">
                  <svg class="w-6 h-6 text-gray-900 ml-1" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                  </svg>
                </div>
              </div>
              <!-- Duration -->
              <div class="absolute bottom-3 right-3 bg-black/70 text-white text-xs px-2 py-0.5 rounded-md">
                {video.duration}
              </div>
            </div>
            <div class="mt-2 px-1">
              <p class="text-white text-xs font-medium truncate">{video.title}</p>
              <p class="text-gray-400 text-xs mt-0.5">{video.views}</p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- ===== BLOG POSTS ===== -->
  {recentPosts.length > 0 && (
    <section class="py-16 bg-white">
      <div class="container-custom">
        <div class="flex items-center justify-between mb-10">
          <div>
            <h2 class="font-serif text-3xl font-bold text-gray-900">
              ğŸ“ Guides & Conseils
            </h2>
            <p class="text-gray-500 mt-1 text-sm">Tout ce qu'il faut savoir pour dÃ©corer intelligemment</p>
          </div>
          <a href="/blog/" class="text-primary-600 hover:text-primary-700 font-medium text-sm flex items-center gap-1 whitespace-nowrap">
            Tous les articles
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {recentPosts.map((post) => (
            <BlogCard
              title={post.data.title}
              description={post.data.description}
              cover={post.data.cover}
              coverAlt={post.data.coverAlt}
              category={post.data.category}
              type={post.data.type}
              pubDate={post.data.pubDate}
              slug={post.id}
            />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- ===== TESTIMONIALS â€” Peak-End Rule + Social proof (landing-page-design skill) ===== -->
  <section class="py-16 bg-gray-50">
    <div class="container-custom">
      <div class="text-center mb-10">
        <span class="inline-flex items-center gap-1.5 bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold mb-3">
          âœ… AVIS VÃ‰RIFIÃ‰S
        </span>
        <h2 class="font-serif text-3xl md:text-4xl font-bold text-gray-900 mb-2">Ce qu'ils en pensent</h2>
        <p class="text-gray-500 text-sm">Lecteurs qui ont achetÃ© grÃ¢ce Ã  mes recommandations</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
          <div class="flex text-amber-400 text-sm mb-3">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="text-gray-700 text-sm leading-relaxed mb-4">"J'ai commandÃ© la lampe sunset sur le conseil d'Issam. Franchement c'est dingue, ma chambre est transformÃ©e pour 19â‚¬. Ma copine m'a demandÃ© oÃ¹ j'avais achetÃ© Ã§a ğŸ˜‚"</p>
          <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm">S</div>
            <div>
              <p class="font-semibold text-gray-900 text-sm">Sarah M.</p>
              <p class="text-xs text-gray-400">Paris Â· Achat vÃ©rifiÃ© âœ“</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 md:-translate-y-2">
          <div class="flex text-amber-400 text-sm mb-3">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="text-gray-700 text-sm leading-relaxed mb-4">"Le site m'a fait Ã©conomiser au moins 150â‚¬ ce mois-ci. Les avis sont honnÃªtes, il dit quand un produit vaut pas le coup. C'est rare sur internet Ã§a."</p>
          <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold text-sm">K</div>
            <div>
              <p class="font-semibold text-gray-900 text-sm">Karim B.</p>
              <p class="text-xs text-gray-400">Lyon Â· AbonnÃ© newsletter âœ“</p>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
          <div class="flex text-amber-400 text-sm mb-3">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="text-gray-700 text-sm leading-relaxed mb-4">"J'avais peur de commander une lampe arc Ã  80â‚¬. L'avis dÃ©taillÃ© m'a convaincue. ReÃ§ue hier, exactement comme dÃ©crit. Prime 24h, Ã§a marche top."</p>
          <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm">A</div>
            <div>
              <p class="font-semibold text-gray-900 text-sm">Amina L.</p>
              <p class="text-xs text-gray-400">Marseille Â· Achat vÃ©rifiÃ© âœ“</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Aggregate rating -->
      <div class="mt-10 flex flex-col sm:flex-row items-center justify-center gap-6">
        <div class="text-center">
          <div class="text-4xl font-bold text-gray-900">4,9/5</div>
          <div class="flex text-amber-400 text-lg justify-center mt-1">â˜…â˜…â˜…â˜…â˜…</div>
          <p class="text-xs text-gray-400 mt-1">Note moyenne des lecteurs</p>
        </div>
        <div class="hidden sm:block w-px h-12 bg-gray-200"></div>
        <div class="text-center">
          <div class="text-4xl font-bold text-gray-900">+1 200</div>
          <p class="text-sm text-gray-500 mt-1">Lecteurs abonnÃ©s</p>
          <p class="text-xs text-gray-400">qui reÃ§oivent les bons plans</p>
        </div>
        <div class="hidden sm:block w-px h-12 bg-gray-200"></div>
        <div class="text-center">
          <div class="text-4xl font-bold text-gray-900">64</div>
          <p class="text-sm text-gray-500 mt-1">Produits testÃ©s</p>
          <p class="text-xs text-gray-400">personnellement par Issam</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== NEWSLETTER â€” Reciprocity principle (marketing-psychology) ===== -->
  <section class="py-16 bg-gradient-to-br from-primary-600 to-accent-600">
    <div class="container-custom">
      <div class="max-w-2xl mx-auto text-center">
        <div class="text-5xl mb-4">ğŸ“¬</div>
        <h2 class="font-serif text-3xl md:text-4xl font-bold text-white mb-3">
          Bons plans dans ta boite mail
        </h2>
        <p class="text-primary-100 mb-8 text-lg leading-relaxed">
          Chaque semaine : les meilleurs produits dÃ©co + codes promo Amazon.<br class="hidden md:block" />
          <strong class="text-white">0 spam, dÃ©sabonnement en 1 clic.</strong>
        </p>
        <form class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto" onsubmit="return false;">
          <input
            type="email"
            placeholder="ton@email.fr"
            class="input-newsletter flex-1 bg-white/10 border-white/30 text-white placeholder-white/60 focus:border-white focus:ring-white/20"
          />
          <button type="submit" class="px-6 py-3 bg-white text-primary-700 font-bold rounded-xl hover:bg-gray-100 transition-colors shadow-lg whitespace-nowrap">
            Recevoir les bons plans
          </button>
        </form>
        <p class="text-primary-200 text-xs mt-4">+1 200 abonnÃ©s Â· Gratuit Â· DÃ©sinscription immÃ©diate</p>
      </div>
    </div>
  </section>

  <!-- ===== FAQ â€” E-E-A-T (seo-audit skill) ===== -->
  <section class="py-16 bg-gray-50">
    <div class="container-custom max-w-3xl">
      <div class="text-center mb-10">
        <h2 class="font-serif text-3xl font-bold text-gray-900 mb-2">Questions frÃ©quentes</h2>
        <p class="text-gray-500 text-sm">Tout ce que vous devez savoir avant d'acheter</p>
      </div>
      <div class="space-y-4">
        {faqItems.map((item) => (
          <details class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden group">
            <summary class="px-6 py-5 font-semibold text-gray-900 cursor-pointer flex justify-between items-center list-none hover:text-primary-600 transition-colors">
              <span>{item.q}</span>
              <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0 ml-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="px-6 pb-5 text-gray-600 leading-relaxed text-sm border-t border-gray-50 pt-4">
              {item.a}
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>

  <!-- ===== EBOOK CTA ===== -->
  <section class="py-12 bg-gradient-to-r from-indigo-700 to-purple-700">
    <div class="container-custom">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6 max-w-4xl mx-auto">
        <div class="text-center md:text-left">
          <span class="text-4xl block mb-2">ğŸ“š</span>
          <h2 class="font-serif text-2xl md:text-3xl font-bold text-white mb-2">
            Ebook : 50 Astuces DÃ©co Petit Budget
          </h2>
          <p class="text-indigo-200 text-sm">Transformez chaque piÃ¨ce pour moins de 50 â‚¬ â€” guide pratique PDF</p>
          <div class="flex items-center gap-3 mt-3 justify-center md:justify-start">
            <div class="flex text-amber-400 text-sm">â˜…â˜…â˜…â˜…â˜…</div>
            <span class="text-indigo-200 text-xs">127 lecteurs satisfaits</span>
          </div>
        </div>
        <div class="text-center flex-shrink-0">
          <div class="mb-3">
            <span class="text-sm text-indigo-300 line-through">19,99 â‚¬</span>
            <span class="text-4xl font-bold text-white ml-2">9,99 â‚¬</span>
          </div>
          <a href="/ebooks/" class="inline-flex items-center justify-center px-8 py-3 bg-white text-indigo-700 font-bold rounded-xl hover:bg-gray-100 transition-colors shadow-xl text-sm">
            TÃ©lÃ©charger mon guide â†’
          </a>
          <p class="text-indigo-300 text-xs mt-2">AccÃ¨s immÃ©diat Â· Satisfait ou remboursÃ©</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== SOCIAL CTA ===== -->
  <section class="py-12 bg-white border-t border-gray-100">
    <div class="container-custom text-center">
      <h2 class="font-serif text-2xl md:text-3xl font-bold text-gray-900 mb-3">
        Rejoins la communautÃ© dÃ©co
      </h2>
      <p class="text-gray-500 mb-8 max-w-xl mx-auto text-sm">
        Hauls Amazon, before/after et bons plans dÃ©co en vidÃ©o â€” rejoins +10 000 abonnÃ©s qui s'inspirent chaque jour.
      </p>
      <div class="flex flex-col sm:flex-row gap-3 justify-center">
        <a href={siteConfig.social.tiktok} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center px-6 py-3 bg-gray-900 text-white font-bold rounded-xl hover:bg-gray-800 transition-colors gap-2.5 shadow-md">
          <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-2.88 2.5 2.89 2.89 0 01-2.89-2.89 2.89 2.89 0 012.89-2.89c.28 0 .54.04.79.1V9.01a6.27 6.27 0 00-.79-.05 6.34 6.34 0 00-6.34 6.34 6.34 6.34 0 006.34 6.34 6.34 6.34 0 006.34-6.34V8.75a8.18 8.18 0 004.76 1.52V6.84a4.83 4.83 0 01-1-.15z"/></svg>
          Suivre sur TikTok
        </a>
        <a href={siteConfig.social.youtube} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center px-6 py-3 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors gap-2.5 shadow-md">
          <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          S'abonner YouTube
        </a>
        <a href={siteConfig.social.instagram} target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-bold rounded-xl hover:from-pink-600 hover:to-purple-600 transition-all gap-2.5 shadow-md">
          <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
          Instagram
        </a>
      </div>
    </div>
  </section>

  <!-- ===== POPUP NEWSLETTER â€” Zeigarnik + Reciprocity (marketing-psychology) ===== -->
  <div id="newsletter-popup" class="fixed inset-0 z-[200] hidden items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
    <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden relative animate-in fade-in zoom-in duration-300">
      <button
        id="close-popup"
        class="absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-500 transition-colors z-10"
        aria-label="Fermer"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
      <!-- Top gradient bar -->
      <div class="h-2 bg-gradient-to-r from-primary-500 to-accent-500"></div>
      <div class="p-8">
        <div class="text-center mb-6">
          <div class="text-5xl mb-3">ğŸ</div>
          <h3 class="font-serif text-2xl font-bold text-gray-900 mb-2">Bon plan exclusif â€” ce soir seulement</h3>
          <p class="text-gray-500 text-sm leading-relaxed">ReÃ§ois <strong class="text-gray-900">mes 5 meilleurs produits Amazon dÃ©co du mois</strong> + les codes promo actifs. Gratuit.</p>
        </div>
        <!-- Social proof inside popup -->
        <div class="flex items-center justify-center gap-2 mb-5 text-xs text-gray-400">
          <div class="flex -space-x-2">
            <div class="w-6 h-6 bg-gradient-to-br from-pink-400 to-purple-400 rounded-full border-2 border-white flex items-center justify-center text-white text-xs font-bold">S</div>
            <div class="w-6 h-6 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full border-2 border-white flex items-center justify-center text-white text-xs font-bold">K</div>
            <div class="w-6 h-6 bg-gradient-to-br from-amber-400 to-orange-400 rounded-full border-2 border-white flex items-center justify-center text-white text-xs font-bold">A</div>
          </div>
          <span>+1 200 abonnÃ©s satisfaits</span>
        </div>
        <form class="flex flex-col gap-3" onsubmit="return handlePopupSubmit(event)">
          <input
            type="email"
            id="popup-email"
            placeholder="ton@email.fr"
            class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-100 text-sm"
            required
          />
          <button type="submit" class="w-full py-3.5 bg-gradient-to-r from-primary-600 to-accent-600 text-white font-bold rounded-xl hover:opacity-90 transition-opacity shadow-lg text-sm">
            âœ… Recevoir mon bon plan gratuit
          </button>
        </form>
        <p class="text-center text-xs text-gray-400 mt-3">0 spam Â· DÃ©sabonnement en 1 clic</p>
      </div>
    </div>
  </div>

  <script>
    // Popup logic â€” Zeigarnik Effect + delayed trigger
    const POPUP_KEY = 'md_popup_shown';
    const popup = document.getElementById('newsletter-popup');
    const closeBtn = document.getElementById('close-popup');

    function showPopup() {
      if (!popup || sessionStorage.getItem(POPUP_KEY)) return;
      popup.classList.remove('hidden');
      popup.classList.add('flex');
      sessionStorage.setItem(POPUP_KEY, '1');
    }

    function hidePopup() {
      popup?.classList.add('hidden');
      popup?.classList.remove('flex');
    }

    // Show after 20 seconds
    setTimeout(showPopup, 20000);

    // Exit intent (desktop)
    document.addEventListener('mouseleave', (e) => {
      if (e.clientY <= 10) showPopup();
    });

    closeBtn?.addEventListener('click', hidePopup);
    popup?.addEventListener('click', (e) => {
      if (e.target === popup) hidePopup();
    });

    // @ts-ignore
    window.handlePopupSubmit = function(e: Event) {
      e.preventDefault();
      const email = (document.getElementById('popup-email') as HTMLInputElement)?.value;
      if (email) {
        const btn = (e.target as HTMLFormElement)?.querySelector('button');
        if (btn) { btn.textContent = 'ğŸ‰ Merci ! VÃ©rifie ta boite mail'; btn.disabled = true; }
        setTimeout(hidePopup, 2500);
      }
      return false;
    };
  </script>
</BaseLayout>
