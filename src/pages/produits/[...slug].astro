---
import ProductLayout from '../../layouts/ProductLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const products = await getCollection('products');
  return products.map((product) => ({
    params: { slug: product.data.slug },
    props: { product },
  }));
}

const { product } = Astro.props;
---

<ProductLayout
  name={product.data.name}
  slug={product.data.slug}
  shortDescription={product.data.shortDescription}
  fullDescription={product.data.fullDescription}
  category={product.data.category}
  amazonAsin={product.data.amazonAsin}
  affiliateTag={product.data.affiliateTag}
  price={product.data.price}
  rating={product.data.rating}
  image={product.data.image}
  pros={product.data.pros}
  cons={product.data.cons}
  specifications={product.data.specifications}
  featured={product.data.featured}
  bestseller={product.data.bestseller}
  inStock={product.data.inStock}
  youtubeVideoId={product.data.youtubeVideoId}
/>
