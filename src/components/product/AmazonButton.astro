---
import { buildAmazonLink } from '../../utils/affiliate';

interface Props {
  asin: string;
  tag?: string;
  text?: string;
  size?: 'small' | 'medium' | 'large';
}

const { asin, tag = 'issamdeco-21', text = 'Voir sur Amazon', size = 'medium' } = Astro.props;

const url = buildAmazonLink(asin, tag);

const sizeClasses = {
  small: 'px-4 py-2 text-sm',
  medium: 'px-6 py-3 text-base',
  large: 'px-8 py-4 text-lg',
};
---

<a
  href={url}
  rel="nofollow sponsored noopener"
  target="_blank"
  class:list={[
    'btn-amazon',
    sizeClasses[size],
  ]}
>
  <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
    <path d="M.045 18.02c.072-.116.187-.124.348-.022 2.344 1.47 4.882 2.21 7.616 2.21 2.038 0 4.04-.438 5.95-1.31.246-.113.484-.23.716-.351.155-.082.299-.04.434.121.145.174.107.33-.097.475a12.872 12.872 0 01-5.347 1.727 14.117 14.117 0 01-5.5-.314 14.439 14.439 0 01-3.973-1.793c-.208-.14-.267-.292-.147-.443z"/>
    <path d="M6.394 14.906c.088-.082.19-.088.305-.018.758.453 1.547.795 2.37 1.027.815.232 1.647.346 2.492.346.878 0 1.726-.157 2.543-.473.183-.069.309-.026.378.126.072.157.011.283-.184.38a7.942 7.942 0 01-3.09.624c-1.122 0-2.182-.216-3.175-.648a8.607 8.607 0 01-1.553-.859c-.113-.08-.138-.178-.086-.505z"/>
    <path d="M14.398 4.103c.477-.048.91.058 1.303.314.391.256.635.595.73 1.019.096.422.04.83-.167 1.222-.208.391-.49.67-.851.838l-.044.024c-.274.15-.561.21-.865.183-.302-.028-.562-.14-.783-.337-.22-.196-.363-.44-.43-.732-.067-.291-.044-.577.066-.857.11-.279.28-.496.517-.648l.016-.008c.25-.142.342-.34.27-.595-.068-.256-.22-.413-.457-.466a1.113 1.113 0 00-.621.048c-.406.143-.723.39-.951.744a2.366 2.366 0 00-.365 1.212c-.019.452.082.873.301 1.264.22.39.518.687.896.889.378.2.78.286 1.205.256.427-.03.82-.167 1.183-.413.361-.246.636-.56.824-.943.187-.384.264-.788.228-1.212a2.388 2.388 0 00-.476-1.195 2.437 2.437 0 00-1.056-.796 2.506 2.506 0 00-1.301-.16z"/>
  </svg>
  {text}
  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
  </svg>
</a>
